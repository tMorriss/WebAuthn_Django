{% load static %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>WebAuthnテスト</title>
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}">
    <script src="{% static 'jquery-3.5.1.min.js' %}"></script>
    <script src="{% static 'jquery.qrcode.min-1.0.js' %}"></script>
    <script src="{% static 'webauthn.js' %}"></script>
    <script>
        const list_url = "{% url 'list' %}";
        const delete_url = "{% url 'delete' %}";
        const qr_generate_url = "{% url 'qr_generate' %}";
        const qr_check_url = "{% url 'qr_check' %}";
        window.onload = function () {
            // FIDO対応か確認
            PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable(
            ).then((result) => {
                if (!result) {
                    $("body").css('background-color', 'red');
                }
            });
        }
    </script>
</head>

<body>
    <input type="username" id="register_username" value="tMorriss" /><br>
    <button onclick="registerWithUVPAA()">登録</button><button onclick="register()">登録(apple)</button><br>
    <button onclick="authWithUVPAA()">認証</button>
    <button onclick="auth()">認証(apple)</button><br>
    <div id="resultMsg"></div>
    <button onclick="showList()">鍵一覧</button>
    <div id="tblList"></div>
    <button onclick="generateQR()">QR生成</button>
    <div id="qrcode"></div>
    <div id="verify_link"></div>
</body>

</html>
